"use strict";const registrationForm=document.querySelector(".registration__form"),firstNameInput=document.getElementById("first-name"),secondNameInput=document.getElementById("second-name"),countryInput=document.getElementById("country"),countriesList=document.querySelector(".countries__list"),phoneInput=document.getElementById("phone"),passwordInput=document.getElementById("password"),confirmPasswordInput=document.getElementById("confirm-password"),emailInput=document.getElementById("email"),agreeCheckbox=document.getElementById("agree"),fieldsTransition=new ScrollOut({once:!0}),countriesURL="data/country-id.json";function countryToPhone(e){countriesList.innerHTML=e.map((({name:e})=>`<li class="countries__item">${e}</li>`)).join(""),countryInput.addEventListener("keyup",(function(t){const n=t.target.value;countriesList.innerHTML=e.filter((({name:e})=>e.toLowerCase().includes(n.toLowerCase()))).map((({name:e})=>`<li class="countries__item">${e}</li>`)).join("")})),countriesList.addEventListener("click",(e=>{countryInput.value=e.target.textContent})),phoneInput.addEventListener("focus",(t=>{let n="+";if(countryInput.value){const t=e.find((({name:e})=>e==countryInput.value));t&&(n=t.dial_code)}t.target.value=n}))}window.onload=function(){fetch(countriesURL).then((e=>e.ok?e.json():Promise.reject([{name:"Russia",dial_code:"+7",code:"RU"},{name:"Ukraine",dial_code:"+380",code:"UA"},{name:"United States",dial_code:"+1",code:"US"}]))).then((e=>{countryToPhone(e)})).catch((e=>{countryToPhone(e),console.warn("Load countries data error. Used simle data")}))},countryInput.addEventListener("focus",(()=>{const e=countryInput.closest(".field");countriesList.style.cssText=`\n    display: block;\n    top: ${e.offsetTop+countryInput.offsetHeight+2}px;\n    left: ${e.offsetLeft}px;\n    width: ${e.offsetWidth+1}px;\n  `})),countryInput.addEventListener("blur",(()=>{window.setTimeout((()=>countriesList.style.cssText=""),500)})),registrationForm.addEventListener("submit",(e=>{e.preventDefault();let t=!0;function n(e){e.closest(".field").classList.add("field--err"),window.setTimeout((()=>e.closest(".field").classList.remove("field--err")),4e3)}firstNameInput.value.length<=2&&(t=!1,n(firstNameInput)),secondNameInput.value.length<=2&&(t=!1,n(secondNameInput)),countryInput.value.length<=0&&(t=!1,n(countryInput)),phoneInput.value.length<=1&&(t=!1,n(phoneInput)),/(?=.*[0-9])(?=.*[!@#$%^&*\-_])(?=.*[a-zA-Z])[0-9a-zA-Z!@#$%^&*\-_]{6,}/g.test(passwordInput.value)||(t=!1,n(passwordInput)),passwordInput.value===confirmPasswordInput.value&&""!=confirmPasswordInput.value||(t=!1,n(confirmPasswordInput)),/^[^\s@]+@[^\s@]+$/.test(emailInput.value)||(t=!1,n(emailInput)),agreeCheckbox.checked||(t=!1,n(agreeCheckbox)),t&&alert("Данные отправлены")})),$(".greeting__btn .btn").on("click",(function(e){e.preventDefault();var t=$(this).attr("href");$("html, body").stop().animate({scrollTop:$(t).offset().top},100)}));const body=document.querySelector("body"),openModalButtons=document.querySelectorAll("[data-modal-target]"),closeModalButtons=document.querySelectorAll("[data-close-button]"),overlay=document.getElementById("overlay");function openModal(e){null!=e&&(body.style.overflowY="hidden",e.classList.add("active"),overlay.classList.add("active"))}function closeModal(e){null!=e&&(body.removeAttribute("style"),e.classList.remove("active"),overlay.classList.remove("active"))}openModalButtons.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();openModal(document.querySelector(e.dataset.modalTarget))}))})),overlay.addEventListener("click",(()=>{document.querySelectorAll(".modal.active").forEach((e=>{closeModal(e)}))})),closeModalButtons.forEach((e=>{e.addEventListener("click",(()=>{closeModal(e.closest(".modal"))}))}));